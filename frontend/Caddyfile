:80 {
	# Serve static frontend files
	root * /usr/share/caddy

	# API proxy to backend
	handle /api/* {
		uri strip_prefix /api
		reverse_proxy backend:8000
	}

	# RabbitMQ Management UI proxy
	handle_path /rabbitmq/* {
		reverse_proxy rabbitmq:15672
	}

	# SPA fallback - serve index.html for all other routes
	handle {
		try_files {path} /index.html
		file_server
	}
}
